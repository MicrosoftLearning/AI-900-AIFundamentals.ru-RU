---
lab:
  title: Знакомство с Компьютерным зрением
---

# <a name="explore-computer-vision"></a>Знакомство с Компьютерным зрением

> **Примечание**. Для выполнения этого задания вам потребуется [подписка Azure](https://azure.microsoft.com/free?azure-portal=true), в которой у вас есть административный доступ.

Для анализа изображений и извлечения сведений о них Cognitive Services использует предварительно обученные модели машинного обучения из службы *Компьютерное зрение*.

Например, предположим, что компания *Northwind Traders* решила создать систему "умного" магазина, с помощью которой службы искусственного интеллекта распознают в магазине клиентов, которым нужна помощь, и направляют к ним сотрудников. С помощью службы "Компьютерное зрение" изображения, создаваемые камерами в магазине, можно проанализировать, чтобы предоставить осмысленное описание того, что они записывают.

В этом лабораторном занятии вы будете использовать простое приложение командной строки и увидите работу службы "Компьютерное зрение" в действии. Те же принципы и функциональные возможности реализованы и в реальных решениях, таких как веб-сайты и приложения для телефонов.

## <a name="create-a-cognitive-services-resource"></a>Создание ресурса *Cognitive Services*

Для использования службы Компьютерного зрения можно создать ресурс **Компьютерное зрение** или **Cognitive Services**.

Если вы еще этого не сделали, создайте в своей подписке Azure ресурс **Cognitive Services**.

1. На другой вкладке браузера откройте портал Azure по адресу [https://portal.azure.com](https://portal.azure.com?azure-portal=true) и войдите в него, используя свою учетную запись Майкрософт.

1. Нажмите кнопку **&#65291; Создать ресурс**, выполните поиск по запросу *Cognitive Services* и создайте ресурс **Cognitive Services** со следующими параметрами:
    - **Подписка**: *ваша подписка Azure*.
    - **Группа ресурсов**: *выберите существующую или создайте новую группу ресурсов с уникальным именем*.
    - **Регион**: *выберите любой доступный регион*.
    - **Имя**: *укажите уникальное имя*.
    - **Ценовая категория**: Стандартный S0.
    - **Устанавливая этот флажок, я подтверждаю, что мною прочитаны все приведенные ниже условия и я понимаю их**: флажок установлен.

1. Проверьте и создайте ресурс, а затем дождитесь завершения развертывания. Затем перейдите к развернутому ресурсу.

1. Откройте страницу **Ключи и конечная точка** для своего ресурса Cognitive Services. Для подключения из клиентских приложений потребуются конечная точка и ключи.

## <a name="run-cloud-shell"></a>Запуск Cloud Shell

Чтобы протестировать возможности службы Компьютерного зрения, мы используем простое приложение командной строки, которое выполняется в Cloud Shell в Azure.

1. На портале Azure нажмите кнопку **[>_]** (*Cloud Shell*) в верхней части страницы справа от поля поиска. В нижней части портала откроется панель Cloud Shell.

    ![Запустите Cloud Shell, нажав значок справа от верхнего поля поиска.](media/analyze-images-computer-vision-service/powershell-portal-guide-1.png)

1. При первом запуске Cloud Shell вам может быть предложено выбрать тип оболочки, которую вы будете использовать (*Bash* или *PowerShell*). Выберите ссылку **PowerShell**. В противном случае пропустите этот шаг.  

1. Если вам будет предложено создать хранилище для Cloud Shell, укажите свою подписку и нажмите **Создать хранилище**. Затем подождите минуту, пока хранилище не будет создано.

    ![Нажмите "Подтвердить", чтобы создать хранилище.](media/analyze-images-computer-vision-service/powershell-portal-guide-2.png)

1. Убедитесь, что тип оболочки в левом верхнем углу панели Cloud Shell изменился на *PowerShell*. Если там указана оболочка *Bash*, выберите *PowerShell* из раскрывающегося меню.

    ![Как найти раскрывающееся меню слева для переключения на PowerShell](media/analyze-images-computer-vision-service/powershell-portal-guide-3.png)

1. Дождитесь запуска PowerShell. На портале Azure должен отобразиться следующий экран:  

    ![Дождитесь запуска PowerShell.](media/analyze-images-computer-vision-service/powershell-prompt.png)

## <a name="configure-and-run-a-client-application"></a>Настройка и запуск клиентского приложения

Теперь, когда у вас есть среда Cloud Shell, можно запустить простое приложение, использующее службу Компьютерного зрения для анализа образа.

1. В командной оболочке введите следующую команду, чтобы скачать пример приложения и сохранить его в папку ai-900.

    ```PowerShell
    git clone https://github.com/MicrosoftLearning/AI-900-AIFundamentals ai-900
    ```

    > **Совет**. Если вы уже использовали эту команду в другом задании для клонирования репозитория *ai-900*, этот шаг можно пропустить.

1. Файлы скачиваются в папку **ai-900**. Теперь нам нужно просмотреть все файлы в хранилище Cloud Shell и поработать с ними. Введите в оболочке следующую команду:

    ```PowerShell
    code .
    ```

    Обратите внимание, что откроется редактор, подобный следующему:

    ![Редактор кода.](media/analyze-images-computer-vision-service/powershell-portal-guide-4.png)

1. На панели **Файлы** слева разверните узел **ai-900** и выберите файл **analyze-image.ps1**. Этот файл содержит код, который использует службу Компьютерного зрения для анализа текста на изображении, как показано ниже:

    ![Редактор, содержащий код для анализа изображений.](media/analyze-images-computer-vision-service/analyze-image-code.png)

1. Не тратьте слишком много времени на то, чтобы понять подробности кода; важно то, что в нем нужно указать URL-адрес конечной точки и один из ключей для ресурса Cognitive Services. Скопируйте их со страницы **Ключи и конечные точки** для своего ресурса с портала Azure и вставьте в редакторе кода, заменив значения заполнителей **YOUR_KEY** и **YOUR_ENDPOINT** соответственно ключом и конечной точкой.

    > **Совет** Вы можете настроить области **Ключи и конечная точка** и **Редактор** на экране с помощью разделительной полосы.

    После того как значения ключа и конечной точки будут вставлены, первые две строки кода должны выглядеть следующим образом:

    ```PowerShell
    $key="1a2b3c4d5e6f7g8h9i0j...."    
    $endpoint="https..."
    ```

1. В правом верхнем углу панели редактора нажмите кнопку **...**, чтобы открыть меню, и выберите **Сохранить**, чтобы сохранить свои изменения.

    Пример клиентского приложения будет использовать службу Компьютерного зрения для анализа следующего изображения, полученного камерой в магазине Northwind Trader:

    ![Изображение родителя, снимающего ребенка в магазине на камеру сотового телефона](media/analyze-images-computer-vision-service/store-camera-1.jpg)

1. В области PowerShell введите следующие команды для запуска кода:

    ```PowerShell
    cd ai-900
    ./analyze-image.ps1 store-camera-1.jpg
    ```

1. Проверьте результаты анализа изображений, в которые входит следующее:
    - Предлагаемый заголовок, описывающий изображение.
    - Список объектов, определенных в изображении.
    - Список тегов, имеющих отношение к изображению.

1. Теперь давайте попробуем еще одно изображение:

    ![Изображение человека с корзиной для покупок в супермаркете](media/analyze-images-computer-vision-service/store-camera-2.jpg)

    Чтобы проанализировать второе изображение, введите следующую команду:

    ```PowerShell
    ./analyze-image.ps1 store-camera-2.jpg
    ```

1. Проверьте результаты анализа для второго изображения.

1. Попробуем еще одно:

    ![Изображение человека с тележкой для покупок](media/analyze-images-computer-vision-service/store-camera-3.jpg)

    Чтобы проанализировать третье изображение, введите следующую команду:

    ```PowerShell
    ./analyze-image.ps1 store-camera-3.jpg
    ```

1. Проверьте результаты анализа для третьего изображения.

## <a name="learn-more"></a>Дополнительные сведения

В этом простом приложении демонстрируются лишь некоторые возможности службы Компьютерного зрения. Дополнительные сведения о том, что можно сделать с помощью этой службы, см. на [странице службы "Компьютерное зрение"](https://azure.microsoft.com/services/cognitive-services/computer-vision/).
