---
lab:
  title: Изучение ответов на вопросы
---

# <a name="explore-question-answering"></a>Изучение ответов на вопросы

> **Примечание** Чтобы выполнить это задание вам потребуется [подписка Azure](https://azure.microsoft.com/free?azure-portal=true), по которой у вас есть административный доступ.

Для сценариев поддержки клиентов обычно создается бот, который способен понимать распространенные вопросы и отвечать на них в окне чата на веб-сайте, через электронную почту или голосовой интерфейс. Для работы бот использует базу знаний с вопросами и ответами на них.

## <a name="create-a-custom-question-answering-knowledge-base"></a>Создание пользовательской базы знаний ответов на вопросы

Функция пользовательских ответов на вопросы языковой службы позволяет быстро создать базу знаний путем ввода пар "вопрос-ответ" либо на основе существующего документа или веб-страницы. Затем для интерпретации вопросов и поиска ответов на них служба использует встроенные возможности обработки естественного языка.

1. Откройте портал Azure по адресу [https://portal.azure.com](https://portal.azure.com?azure-portal=true) и войдите в него, используя свою учетную запись Майкрософт.

1. Нажмите кнопку **&#65291; Создать ресурс**, выполните поиск по запросу *Языковая служба* и создайте ресурс **Языковой службы** со следующими параметрами, а затем выберите **Продолжить, чтобы создать ресурс**, **Выберите дополнительные признаки**
    - **Признаки по умолчанию**: *оставьте признаки по умолчанию*.
    - **Пользовательские признаки**: *выберите настраиваемые ответы на вопросы*.

    ![Создание ресурса языковой службы с включенным пользовательскими ответами на вопросы.](media/create-a-bot/create-language-service-resource.png)

1. На странице **Создание языка** укажите параметры ниже.
    - **Подписка**: *ваша подписка Azure*.
    - **Группа ресурсов**: *выберите существующую группу ресурсов или создайте новую*.
    - **Имя**: *уникальное имя языкового ресурса*.
    - **Ценовая категория**: S (1000 звонков в минуту)
    - **Регион Поиска Azure**: *любое доступное расположение*.
    - **Ценовая категория Поиска Azure**: "Бесплатный (F), 3 индекса" (*если этот уровень недоступен, выберите "Стандартный (S) (50 индексов)* ).
    - **By checking this box I certify that I have reviewed and acknowledge the terms in the Responsible AI Notice** (Устанавливая этот флажок, я подтверждаю, что мною прочтены и приняты условия уведомления об ответственном применении ИИ): *установлен*.

    > **Примечание** Если вы уже подготавливали ресурсы **Когнитивного поиска Azure** бесплатной ценовой категории, квота может не позволить вам создать ресурс. В этом случае выберите уровень, отличающийся от **Бесплатного (F)** .

1. Щелкните **Просмотр и создание**, а затем нажмите кнопку **Создать**. Дождитесь развертывания языковой службы, которая будет поддерживать базу знаний пользовательских ответов на вопросы.

1. В новой вкладке браузера откройте портал Language Studio по адресу [https://language.azure.com](https://language.azure.com?azure-portal=true) и войдите в него с учетной записью Майкрософт, связанной с вашей подпиской Azure.

1. При появлении запроса на выбор языкового ресурса выберите следующие параметры:
    - **Каталог Azure**: идентификатор каталога Azure для вашей подписки.
    - **Подписка Azure**: ваша подписка Azure.
    - **Языковой ресурс**: ресурс, созданный ранее.

1. Если вам ***не*** предлагается выбрать языковой ресурс, это может быть вызвано тем, что в подписке имеется несколько языковых ресурсов. В этом случае:
    1. На панели в верхней части страницы нажмите кнопку **Параметры (&#9881;)**.
    2. На странице **Параметры** перейдите на вкладку **Ресурсы**.
    3. Выберите только что созданный языковой ресурс и щелкните **Переключить ресурс**.
    4. В верхней части страницы щелкните **Language Studio**, чтобы вернуться на домашнюю страницу Language Studio.

1. В верхней части портала Language Studio в меню **Создать** выберите **Пользовательские ответы на вопросы**.

1. На странице **Выбор параметра языка для ресурса *ваш ресурс*** задайте **I want to select the language when I create a project in this resource** (Я хочу выбрать язык при создании проекта в этом ресурсе) и нажмите **Далее**.

1. На странице **Ввод основных сведений** введите следующие сведения и нажмите кнопку **Далее**:
    - **Языковой ресурс**: *выберите свой языковой ресурс*.  
    - **Ресурс Поиска Azure**: *выберите ресурс службы "Поиск Azure"*.
    - **Имя**: MargiesTravel
    - **Описание**: простая база знаний
    - **Исходный язык**: английский
    - **Ответ по умолчанию, если ответ не получен**: Ответ не найден

1. На странице **Проверка и завершение** щелкните **Создать проект**.

1. Вы перейдете на страницу **Управление источниками**. Щелкните **+Добавить источник** и выберите **URL-адреса**.

1. В поле **Добавьте URL-адреса** нажмите **+ Добавить URL-адрес**. Введите следующий адрес и нажмите **Добавить все**:
    - **Имя URL-адреса**: MargiesKB
    - **URL-адрес**: `https://raw.githubusercontent.com/MicrosoftLearning/AI-900-AIFundamentals/main/data/qna/margies_faq.docx`
    - **Классификация структуры файлов**: *автоматическое обнаружение*. 

## <a name="edit-the-knowledge-base"></a>Изменение базы знаний

База знаний основана на содержимом документа с часто задаваемыми вопросами и некоторых стандартных ответах. Их можно дополнить парами собственных вопросов и ответов.

1. Щелкните **Изменить базу знаний** на панели слева. Затем щелкните **+ Добавить пару вопросов**.

1. В поле **Вопросы** введите `Hello`, а затем нажмите кнопку **Отправить изменения**.

1. Щелкните **+ Добавить альтернативную фразу** и введите `Hi`, а затем нажмите **Отправить изменения**.

1. В поле **Ответ и запросы** введите `Hello`. Оставьте для параметра **Источник** значение "Редакционный".

1. Щелкните **Отправить**. Затем в верхней части страницы щелкните **Сохранить изменения**. Чтобы увидеть эту кнопку, может потребоваться изменить размер окна.

## <a name="train-and-test-the-knowledge-base"></a>Обучение и тестирование базы знаний

Теперь, когда у вас есть база знаний, ее можно протестировать.

1. В верхней части страницы щелкните **Тест**, чтобы проверить базу знаний.

1. В нижней части области тестирования введите сообщение *Hi*. Вы должны увидеть ответ **Hello**.

1. В нижней части области тестирования введите сообщение *I want to book a flight* (Я хочу забронировать рейс). Вы должны увидеть подходящий ответ из базы вопросов и ответов.

    > **Примечание** Он должен включать в себя *короткий ответ*, а также более подробную *форму*: в подробном фрагменте отображается полный текст из документа вопросов и ответов с ответом на наиболее близкий к вашему вопрос, а короткий ответ представляет собой выдержку из этого фрагмента, извлеченную интеллектуальным алгоритмом. Управлять выводом короткого варианта ответа можно с помощью флажка **Отображать короткий ответ** в верхней части области тестирования.

1. Попробуйте задать еще один вопрос, например *How can I cancel a reservation?* (Как отменить резервирование?)

1. Завершив тестирование базы знаний, нажмите кнопку **Тест**, чтобы закрыть область тестирования.

## <a name="create-a-bot-for-the-knowledge-base"></a>Создание бота для базы знаний

База знаний предоставляет серверную службу, которую клиентские приложения могут использовать для ответов на вопросы через тот или иной пользовательский интерфейс. Как правило, такими клиентскими приложениями являются боты. Чтобы база знаний стала доступной для бота, ее необходимо опубликовать как службу, доступную по протоколу HTTP. Затем с помощью Службы Azure Bot можно создать и опубликовать бот, который отвечает на вопросы пользователей с помощью базы знаний.

1. В левой части страницы Language Studio щелкните **Развернуть базу знаний**.

1. В верхней части страницы нажмите **Развернуть**, а затем снова щелкните **Развернуть**.

1. После развертывания службы нажмите **Создать бот**. В новой вкладке браузера откроется портал Azure, где вы сможете создать веб-приложение бота в своей подписке Azure.

1. На портале Azure создайте веб-приложение бота со следующими параметрами (большинство значений будут подставлены):
    - **Дескриптор бота**: *уникальное имя вашего бота*
    - **Подписка**. *Ваша подписка Azure*
    - **Группа ресурсов**: *группа ресурсов, в которой содержится ваш языковой ресурс*
    - **Расположение**: *расположение, в котором находится ваша языковая служба*
    - **Ценовая категория**: Бесплатный (F0)
    - **Имя приложения**: *то же, что и **дескриптор бота** (к этому имени будет автоматически добавлена строка **.azurewebsites.net.**)*
    - **Язык пакета SDK**: *выберите C# или Node.js*
    - **Ключ языкового ресурса**: *создается автоматически, если он не отображается, создайте проект ответов на вопросы в Language Studio* 
    - **План Службы приложений или расположение**: *щелкните стрелку, чтобы создать план. Затем выберите уникальное имя и подходящее расположение для плана Службы приложений*
    - **Application Insights**: отключено
    - **Идентификатор и пароль приложения Майкрософт**: *идентификатор и пароль приложения создаются автоматически*

1. Дождитесь создания бота (во время ожидания вы увидите анимацию значка уведомления в правом верхнем углу в виде колокольчика). Затем в уведомлении о завершении развертывания нажмите **Перейти к ресурсу** (или же на домашней странице нажмите **Группы ресурсов**, откройте группу ресурсов, в которой вы создали бот в виде веб-приложения, и выберите ее).

1. В левой области бота найдите раздел **Параметры**, нажмите **Тестирование в веб-чате** и подождите, пока бот не выведет сообщение **Hello and welcome!** (Здравствуйте и добро пожаловать!). Для инициализации может потребоваться несколько секунд.

1. С помощью интерфейса чата убедитесь, что бот правильно отвечает на вопросы из базы знаний. Например, попробуйте отправить вопрос *I need to cancel my hotel* (Я хочу отменить бронирование в отеле).

Поэкспериментируйте с ботом. Вероятно, вы увидите, что он точно отвечает на вопросы из базы, но плохо распознает вопросы, ответам на которые не обучен. С помощью Language Studio вы можете отредактировать базу знаний, чтобы улучшить ее, а затем опубликовать повторно.

## <a name="learn-more"></a>Подробнее

- Дополнительные сведения о службе ответов на вопросы см. в [документации](https://docs.microsoft.com/azure/cognitive-services/language-service/question-answering/overview).
- Чтобы узнать больше о службе Microsoft Bot, загляните на [страницу службы Azure Bot](https://azure.microsoft.com/services/bot-service/).
