---
lab:
  title: Изучение службы "Речь"
---

# <a name="explore-speech"></a>Изучение службы "Речь"

> **Примечание**. Для выполнения этого задания вам потребуется [подписка Azure](https://azure.microsoft.com/free?azure-portal=true), в которой у вас есть административный доступ.

Чтобы создать программное обеспечение, которое сможет распознавать произносимую речь и реагировать на нее, воспользуйтесь службой **Речь** из Cognitive Services, которая позволяет с легкостью преобразовывать речь в текст и наоборот.

Предположим, вы хотите создать интеллектуальное устройство, которое сможет устно отвечать на вопросы, например "Который час?". Ответом должно быть местное время.

Чтобы протестировать возможности службы "Речь", мы используем простое приложение командной строки, которое выполняется в Cloud Shell. Те же принципы и функциональные возможности реализованы и в реальных решениях, таких как веб-сайты и приложения для телефонов.

## <a name="create-a-cognitive-services-resource"></a>Создание ресурса *Cognitive Services*

Для использования службы "Речь" можно создать ресурс **Речи** или **Cognitive Services**.

Если вы еще этого не сделали, создайте в своей подписке Azure ресурс **Cognitive Services**.

1. На другой вкладке браузера откройте портал Azure по адресу [https://portal.azure.com](https://portal.azure.com?azure-portal=true) и войдите в него, используя свою учетную запись Майкрософт.

1. Нажмите кнопку **&#65291; Создать ресурс**, выполните поиск по запросу *Cognitive Services* и создайте ресурс **Cognitive Services** со следующими параметрами:
    - **Подписка**: *ваша подписка Azure*.
    - **Группа ресурсов**: *выберите существующую или создайте новую группу ресурсов с уникальным именем*.
    - **Регион**: *выберите любой доступный регион*.
    - **Имя**: *укажите уникальное имя*.
    - **Ценовая категория**: Стандартный S0.
    - **Устанавливая этот флажок, я подтверждаю, что мною прочитаны все приведенные ниже условия и я понимаю их**: флажок установлен.

1. Проверьте и создайте ресурс.

### <a name="get-the-key-and-location-for-your-cognitive-services-resource"></a>Получение ключа и расположения для ресурса Cognitive Services

1. Дождитесь завершения развертывания. Затем перейдите к ресурсу Cognitive Services и на странице **Обзор** нажмите ссылку для управления ключами службы. Для подключения к ресурсу Cognitive Services из клиентских приложений понадобятся конечная точка и ключи.

1. Откройте страницу **Ключи и конечная точка** для своего ресурса. Для подключения из клиентских приложений потребуются **расположение/регион** и **ключ**.

## <a name="run-cloud-shell"></a>Запуск Cloud Shell

Чтобы протестировать возможности службы "Речь", мы используем простое приложение командной строки, которое выполняется в Cloud Shell в Azure.

1. На портале Azure нажмите кнопку **[>_]** (*Cloud Shell*) в верхней части страницы справа от поля поиска. В нижней части портала откроется панель Cloud Shell.

    ![Запустите Cloud Shell, нажав значок справа от верхнего поля поиска.](media/recognize-synthesize-speech/powershell-portal-guide-1.png)

1. При первом запуске Cloud Shell вам может быть предложено выбрать тип оболочки, которую вы будете использовать (*Bash* или *PowerShell*). Выберите ссылку **PowerShell**. В противном случае пропустите этот шаг.  

1. Если вам будет предложено создать хранилище для Cloud Shell, укажите свою подписку и нажмите **Создать хранилище**. Затем подождите минуту, пока хранилище не будет создано.

    ![Нажмите "Подтвердить", чтобы создать хранилище.](media/recognize-synthesize-speech/powershell-portal-guide-2.png)

1. Убедитесь, что тип оболочки в левом верхнем углу панели Cloud Shell изменился на *PowerShell*. Если там указана оболочка *Bash*, выберите *PowerShell* из раскрывающегося меню.

    ![Как найти раскрывающееся меню слева для переключения на PowerShell](media/recognize-synthesize-speech/powershell-portal-guide-3.png)

1. Дождитесь запуска PowerShell. На портале Azure должен отобразиться следующий экран:  

    ![Дождитесь запуска PowerShell.](media/recognize-synthesize-speech/powershell-prompt.png)

## <a name="configure-and-run-a-client-application"></a>Настройка и запуск клиентского приложения

Теперь, когда у вас есть пользовательская модель, можно запустить простое клиентское приложение, использующее службу "Речь".

1. В командной оболочке введите следующую команду, чтобы скачать пример приложения и сохранить его в папку ai-900.

    ```PowerShell
    git clone https://github.com/MicrosoftLearning/AI-900-AIFundamentals ai-900
    ```

    >**Совет**. Если вы уже использовали эту команду в другом задании для клонирования репозитория *ai-900*, этот шаг можно пропустить.

1. Файлы скачиваются в папку **ai-900**. Теперь нам нужно просмотреть все файлы в хранилище Cloud Shell и поработать с ними. Введите в оболочке следующую команду:

     ```PowerShell
    code .
    ```

    Обратите внимание, что откроется редактор, подобный следующему:

    ![Редактор кода.](media/recognize-synthesize-speech/powershell-portal-guide-4.png)

1. В области **Файлы** слева разверните узел **ai-900** и выберите файл **speaking-clock.ps1**. Этот файл содержит код, который использует службу "Речь" для распознавания и синтезирования речи:

    ![Редактор с кодом для использования службы "Речь"](media/recognize-synthesize-speech/speaking-clock-code.png)

1. Не тратьте слишком много времени на то, чтобы понять подробности кода; важно то, что в нем нужно указать регион/расположение и один из ключей для ресурса Cognitive Services. Скопируйте их со страницы **Ключи и конечные точки** для своего ресурса с портала Azure и вставьте в редакторе кода, заменив значения заполнителей **YOUR_KEY** и **YOUR_LOCATION** соответственно ключом и конечной точкой.

    > **Совет** Вы можете настроить области **Ключи и конечная точка** и **Редактор** на экране с помощью разделительной полосы.

    После того как значения ключа и расположения/региона будут вставлены, первые строки кода должны выглядеть следующим образом:

    ```PowerShell
    $key = "1a2b3c4d5e6f7g8h9i0j...."
    $region="somelocation"
    ```

1. В правом верхнем углу панели редактора нажмите кнопку **...**, чтобы открыть меню, и выберите **Сохранить**, чтобы сохранить свои изменения. Затем снова откройте меню и выберите пункт **Закрыть редактор**.

    Пример клиентского приложения будет использовать службу "Речь" для транскрибирования входной речи и синтезирования соответствующего голосового ответа. Реальное приложение может принять входные данные из микрофона и передать ответ на динамик, но в этом простом примере мы будем использовать входные данные, предварительно записанные в звуковой файл, и сохраним ответ в другой файл.

    Используйте видеопроигрыватель ниже, чтобы прослушать входные аудиоданные, которые обработает приложение:

    <div class="embeddedvideo"><iframe src="https://www.microsoft.com/videoplayer/embed/RWMAvi" frameborder="0" allowfullscreen="true" data-linktype="external"></iframe></div>

1. В области PowerShell введите следующую команду, чтобы выполнить код:

    ```PowerShell
    cd ai-900
    ./speaking-clock.ps1
    ```

1. Проверьте выходные данные, которые должны представлены успешно распознанным текстом "Который час?". Также проверьте сохраненный соответствующий ответ в файле *output.wav*.

    С помощью видеопроигрывателя ниже прослушайте ответ, созданный приложением:

    <div class="embeddedvideo"><iframe src="https://www.microsoft.com/videoplayer/embed/RWMSIU" frameborder="0" allowfullscreen="true" data-linktype="external"></iframe></div>

## <a name="learn-more"></a>Дополнительные сведения

В этом примере приложении демонстрируются лишь некоторые возможности службы "Речь". Дополнительные сведения о том, что можно сделать с помощью этой службы, см. на [странице службы "Речь"](https://azure.microsoft.com/services/cognitive-services/speech-services/).
